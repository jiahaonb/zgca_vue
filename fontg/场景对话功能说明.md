# 🎬 场景对话功能使用说明

## 功能概述

新的场景对话功能为剧本对话系统增加了沉浸式的视觉体验：
- **场景图片展示**：基于剧本设定自动生成场景背景图
- **透明对话容器**：在场景图片上显示实时对话内容
- **自动消失机制**：对话内容显示10秒后自动隐藏

## 使用流程

### 1. 创建剧本
1. 进入"创建剧本"页面
2. 输入剧本描述（如"火烧赤壁，我是黄盖，有诸葛亮，刘备，周瑜"）
3. 点击"生成剧本"
4. 等待剧本创建完成

### 2. 自动生成场景图片
- 剧本创建成功后，系统会自动生成场景图片
- 也可以手动点击"生成场景图片"按钮重新生成
- 图片基于场景设定生成，展现古代历史场景

### 3. 开始对话
1. 在右下角的输入框中输入您的台词
2. 点击"发送"或使用Ctrl+Enter快捷键
3. 对话内容会在场景图片底部的透明容器中显示
4. 10秒后对话容器自动消失

### 4. AI角色回应
- AI角色发言时，同样会在透明容器中显示
- 显示角色名称、头像和对话内容
- 10秒后自动隐藏，等待下一轮对话

## 界面布局

```
┌─────────────────────────────────────────┐
│              剧本对话                      │
│ [生成场景图片] [刷新] [清空] [结束]          │
├─────────────────────────────────────────┤
│                                         │
│        场景背景图片区域                    │
│                                         │
│  ┌─────────────────────────────────┐    │
│  │ 👤 黄盖                         │    │
│  │ 哈哈哈，周瑜小人！              │    │
│  └─────────────────────────────────┘    │
│              ↑ 透明对话容器               │
│                                  ┌────┐ │
│                                  │输入│ │
│                                  │区域│ │
│                                  └────┘ │
└─────────────────────────────────────────┘
```

## 技术特性

### 场景图片生成
- 使用阿里云万象大模型生成高质量场景图片
- 基于剧本设定自动构建图片描述
- 支持古代中国历史场景，电影级画质

### 透明对话显示
- 使用CSS backdrop-filter实现毛玻璃效果
- 黑色半透明背景，确保文字清晰可读
- 流畅的进入和退出动画效果

### 响应式设计
- 适配不同屏幕尺寸
- 场景图片自动适配容器大小
- 对话容器固定在底部，不遮挡重要场景

## 快捷操作

- **Ctrl + Enter**：快速发送消息
- **生成场景图片**：重新生成或更新场景背景
- **语音录音**：支持语音输入转文字
- **智能台词推荐**：AI推荐适合的台词选项

## 注意事项

1. **网络要求**：场景图片生成需要良好的网络连接
2. **生成时间**：图片生成可能需要10-30秒
3. **存储位置**：图片保存在后端`scene_images`目录
4. **浏览器兼容性**：建议使用Chrome、Firefox等现代浏览器

## 故障排除

### 场景图片无法生成
- 检查网络连接
- 确认API密钥配置正确
- 查看后端日志错误信息

### 对话容器不显示
- 确认浏览器支持CSS backdrop-filter
- 检查控制台是否有JavaScript错误
- 尝试刷新页面重新加载

### 图片加载失败
- 检查后端服务是否正常运行
- 确认图片文件是否存在
- 尝试重新生成场景图片

## 更新日志

### v2.0.0 (2025-07-15)
- ✨ 新增场景图片生成功能
- ✨ 新增透明对话显示容器
- ✨ 新增10秒自动隐藏机制
- 🎨 重新设计对话界面布局
- 🔧 优化用户交互体验 